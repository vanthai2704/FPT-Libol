@using Libol.Models;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    div.form-inline label.col-md-5 {
        justify-content: flex-end;
    }

    div.form-inline label.col-md-7 {
        justify-content: right;
    }

    .form-control {
        margin-left: 2px;
    }

    .form-row {
        margin-top: 10px;
    }
</style>

<form>
    @{
        List<ACQ_ACQUIRE_SOURCE> listNBS = ViewData["ListNBS"] as List<ACQ_ACQUIRE_SOURCE>; // list NBS
        List<CIR_LOAN_TYPE> listKTL = ViewData["listKTL"] as List<CIR_LOAN_TYPE>; // list KTL
        List<ACQ_CURRENCY> listCurrency = ViewData["ListCurrency"] as List<ACQ_CURRENCY>; // ListCurrency
    }
    <div class="form-group col-md-12 form-inline">
        <div class="form-row col-md-12">
            <div class="form-group col-md-6">
                <label class="col-md-6">Mã Tài Liệu</label>
                <input type="email" class="form-control" id="txtCode" placeholder="FPT12345">
                <button type="button" id="btnCodeFind" class="btn btn-primary form-control" data-toggle="modal" data-target="#exampleModal">Tìm</button>

            </div>
            <div class="form-group col-md-6">
                <label class="col-md-6">Mã Đề Nghị</label>
                <input type="email" class="form-control" id="txtCodePO" placeholder="">
                <button type="submit" id="btnCodePOFind" class="btn btn-primary form-control">Tìm</button>
            </div>

        </div>
        <label style="margin-top:10px"><h5>Thông tin xếp giá bổ sung</h5></label>
        <div class="form-row col-md-12 form-inline">
            <div class="form-group col-md-4">
                <label class="col-md-6">Nguồn bổ sung</label>
                <select class="form-control" name="nbsList" id="nbsList">
                    @{
                        foreach (ACQ_ACQUIRE_SOURCE item in listNBS)
                        {
                            <option value="@item.ID">@item.Source</option>
                        }
                    }
                </select>
            </div>
            <div class="form-group col-md-8">
                <label class="col-md-3">Kiểu tư liệu(lưu thông)</label>
                <select class="form-control" name="ktlList" id="ktlList">
                    @{
                        foreach (CIR_LOAN_TYPE item in listKTL)
                        {
                            <option value="@item.ID">@item.LoanType</option>
                        }
                    }
                </select>
            </div>
        </div>
        <div class="form-row col-md-12 form-inline">
            <div class="form-group col-md-4">
                <label class="col-md-6">Ngày bổ sung</label>
                <div class="form-group"><input class="form-control" type="date" value="@string.Format("{0:yyyy-MM-dd}", System.DateTime.Now)" /></div>
            </div>
            <div class="form-group col-md-8">
                <label class="col-md-3">Đơn giá</label>
                <input type="text" class="form-control col-md-3" id="txtPrice" placeholder="1234">
                <select class="form-control" name="ktlList" id="currencyList" onchange="selectCurrency();">
                    @{
                        foreach (ACQ_CURRENCY item in listCurrency)
                        {
                            <option value="@item.Rate" >@item.CurrencyCode</option>
                        }
                    }
                </select>
                <label class="col-md-2">Tỉ giá hạch toán</label>
                <label type="text" class="form-control col-md-1" id="itemRate"></label>
            </div>
        </div>
        <div class="form-row col-md-12 form-inline">
            <div class="form-group col-md-4">
                <label class="col-md-6">Số chứng từ</label>
                <input type="text" class="form-control" id="txtSCT" placeholder="1234">
            </div>
            <div class="form-group col-md-8">
                <label class="col-md-3">Ngày chứng từ</label>
                <div class="form-group"><input class="form-control" type="date" value="@string.Format("{0:yyyy-MM-dd}", System.DateTime.Now)" /></div>
            </div>
        </div>
        <div class="form-row col-md-12 form-inline">
            <div class="form-group col-md-4">
                <label class="col-md-6">Tên Đề Nghị</label>
                <input type="text" class="form-control" id="txtSCT" placeholder="1234">
            </div>
            <div class="form-group col-md-8">
                <label class="col-md-3">Ngày Đề Nghị</label>
                <div class="form-group"><input class="form-control" type="date" value="@string.Format("{0:yyyy-MM-dd}", System.DateTime.Now)" /></div>
            </div>
        </div>

        <label style="margin-top:10px"><h5>Thông tin vị trí xếp giá</h5></label>
        <div class="form-row col-md-12 form-inline">
            <div class="form-group col-md-2">
                <label class="">Thư viện</label>
                <select id="inputState" class="form-control">
                    <option selected="">FSchool</option>
                    <option>...</option>
                    <option>ABC</option>
                    <option>...</option>
                </select>
            </div>
            <div class="form-group col-md-2">
                <label>Kho</label>
                <select id="inputState" class="form-control">
                    <option selected="">GK/GPDEF</option>
                    <option>...</option>
                </select>
            </div>

            <div class="form-group col-md-2">
                <label>Giá Sách</label>
                <input type="text" class="form-control col-md-6" id="inputZip">
            </div>

            <div class="form-group col-md-3">
                <label class="col-md-5">Đăng kí cá biệt</label>
                <input type="text" class="form-control col-md-2" id="inputZip">
                <button type="submit" class="btn btn-primary form-control col-md-4">Sinh giá trị</button>
            </div>
            <div class="form-group col-md-3">
                <label class="col-md-4">Số lượng</label>
                <input type="text" class="form-control col-md-3" id="inputZip">
                <button type="submit" class="btn btn-primary form-control col-md-4">Bổ sung</button>
            </div>

        </div>

        <label style="margin-top:10px"><h5>Thông tin xếp giá hiện thời</h5></label>
        <div class="form-row col-md-12">
            <label class="control-label col-md-5">Tổng số ĐKCB : </label>
            <label class="col-md-7 text-left">11</label>
        </div>
        <div class="form-row col-md-12">
            <label class="control-label col-md-5">Dữ liệu ĐKCB tổng hợp : </label>
            <label class="col-md-7 text-left"><b></b>FSE-HL /TK/XHHL//TK/XHHL003661-71</b></label>
        </div>
        <div class="form-row col-md-12">
            <label class="control-label col-md-5">Tổng số bản rỗi : </label>
            <label class="control-label col-md-7">11</label>
        </div>

        <div class="form-row col-md-12 text-center">
            <div style="margin : auto">
                <button type="submit" class="btn btn-primary form-control">In mã vạch(v)</button>
                <button type="submit" class="btn btn-primary form-control">In nhãn gáy(g)</button>
            </div>
        </div>
        <table class="table table-striped table-bordered">
            <caption>
                <div class="form-row col-md-12 form-inline">
                    <div class="form-group col-md-12">
                        <label class="col-md-2">Lý Do Loại bỏ</label>
                        <select id="inputState" class="form-control">
                            <option selected="">Quà Tặng</option>
                            <option>...</option>
                        </select>
                        <button type="submit" class="btn btn-primary form-control">Loại bỏ(r)</button>
                        <button type="submit" class="btn btn-primary form-control">Kiểm nhận/mở khóa(d)</button>
                    </div>
                </div>
            </caption>
            <thead>
                <tr>
                    <th><input type="checkbox" onchange="checkAll(this)" /></th>
                    <th>Thư viện</th>
                    <th>Kho</th>
                    <th>Giá sách</th>
                    <th>Tập</th>
                    <th>Số định danh</th>
                    <th>ĐKCB</th>
                    <th>Giá tiền</th>
                    <th>Đơn vị</th>
                    <th>Số chứng từ</th>
                    <th>Ngày chứng từ</th>
                    <th>Ngày bổ sung</th>
                    <th>Nguồn bổ sung</th>
                    <th>Ghi chú</th>
                    <th>Trạng thái</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="checkbox" class="form-check-input" id="exampleCheck1"></td>
                    <td>FSE-HL</td>
                    <td>TK/XHHL</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>TK/XHHL003661</td>
                    <td>80000</td>
                    <td>VND</td>
                    <td>05/06/2019</td>
                    <td>05/06/2019</td>
                    <td>Khác</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="form-check-input" id="exampleCheck1"></td>
                    <td>FSE-HL</td>
                    <td>TK/XHHL</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>TK/XHHL003662</td>
                    <td>80000</td>
                    <td>VND</td>
                    <td>05/06/2019</td>
                    <td>05/06/2019</td>
                    <td>Khác</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><input type="checkbox" class="form-check-input" id="exampleCheck1"></td>
                    <td>FSE-HL</td>
                    <td>TK/XHHL</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>TK/XHHL003663</td>
                    <td>80000</td>
                    <td>VND</td>
                    <td>05/06/2019</td>
                    <td>05/06/2019</td>
                    <td>Khác</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>


    </div>
</form>
<form>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Tìm kiếm biểu ghi biên mục</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="form-row">
                        <label class="col-form-label">Nhan đề chính </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Mã xếp giá </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Tác giả </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Nhà xuất bản </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Năm xuất bản </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">ISBN </label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">Tìm(r)</button>
                    <button type="button" class="btn btn-primary">Đặt lại(r)</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng(r)</button>
                </div>
            </div>
        </div>
    </div>
</form>

<script>
    $('#exampleModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget) // Button that triggered the modal
        var recipient = button.data('whatever') // Extract info from data-* attributes
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var modal = $(this)
        //modal.find('.modal-title').text('New message to ' + recipient)
        modal.find('.modal-body input').val(recipient)
    })

    function selectCurrency() {
        var item = $("#currencyList :selected").val();

        $('#itemRate').text(item);
    };

    // check all check box in table
    function checkAll(ele) {
        var checkboxes = document.getElementsByTagName('input');
        if (ele.checked) {
            for (var i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].type == 'checkbox') {
                    checkboxes[i].checked = true;
                }
            }
        } else {
            for (var i = 0; i < checkboxes.length; i++) {
                console.log(i)
                if (checkboxes[i].type == 'checkbox') {
                    checkboxes[i].checked = false;
                }
            }
        }
    }

   

</script>
